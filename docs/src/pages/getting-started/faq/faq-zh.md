# å¸¸è§é—®é¢˜è§£ç­”

<p class="description">æ‚¨åœ¨ä¸€ä¸ªç‰¹å®šçš„é—®é¢˜ä¸Šåœæ»ä¸å‰å—ï¼Ÿ æ‚¨å¯ä»¥å…ˆåœ¨å¸¸è§ FAQï¼ˆé—®é¢˜è§£ç­”ï¼‰ä¸­æ£€ç´¢ä¸€ä¸‹å¸¸è§é—®é¢˜ã€‚</p>

å¦‚æœä»ç„¶æ‰¾ä¸åˆ°æ‰€éœ€çš„å†…å®¹ï¼Œæ‚¨å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„ [æ”¯æŒé¡µé¢](/getting-started/support/) ã€‚

## Material-UI è¶…èµã€‚ æˆ‘è¯¥å¦‚ä½•æ”¯æŒè¯¥é¡¹ç›®ï¼Ÿ

å…¶å®æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥æ”¯æŒ Material-UIï¼š

- **å£å£ç›¸ä¼ **ã€‚ é€šè¿‡åœ¨æ‚¨çš„ç½‘ç«™ä¸Š [é“¾æ¥åˆ° material-ui.com](https://material-ui.com/) æ¥ä¼ æ’­ Material-UI ï¼Œæ¯ä¸ªåå‘é“¾æ¥å¯¹æˆ‘ä»¬æ¥è¯´éƒ½å¾ˆé‡è¦ã€‚ åœ¨ [Twitter ä¸Šå…³æ³¨æˆ‘ä»¬](https://twitter.com/MaterialUI) ï¼Œç‚¹èµå¹¶è½¬å‘ä¸€äº›é‡è¦çš„æ–°é—»ã€‚ æˆ–è€…åªæ˜¯ä¸æ‚¨çš„æœ‹å‹è°ˆè®ºæˆ‘ä»¬ã€‚
- **ç»™æˆ‘ä»¬åé¦ˆ** ã€‚ å‘Šè¯‰æˆ‘ä»¬ä¸€äº›åšå¾—å¥½çš„åœ°æ–¹æˆ–è€…å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚ è¯·ç»™æ‚¨æœ€å¸Œæœ›çœ‹åˆ°èƒ½å¤Ÿè§£å†³çš„é—®é¢˜æŠ•ç¥¨ï¼ˆğŸ‘ï¼‰ã€‚
- **å¸®åŠ©æ–°çš„ç”¨æˆ·** ã€‚ æ‚¨å¯ä»¥åœ¨ [StackOverflow](https://stackoverflow.com/questions/tagged/material-ui) ä¸­å›ç­”ä¸€äº›é—®é¢˜ã€‚
- **åšå‡ºä¸€äº›æ”¹å˜å§**ã€‚ 
  - ç¼–è¾‘æ–‡æ¡£ã€‚ æ¯ä¸ªé¡µé¢å³ä¸Šè§’éƒ½æœ‰ä¸€ä¸ªâ€œç¼–è¾‘æ­¤é¡µé¢â€çš„é“¾æ¥ã€‚
  - é€šè¿‡ [åˆ›å»ºä¸€ä¸ªé—®é¢˜](https://github.com/mui-org/material-ui/issues/new) æ¥æŠ¥å‘Šé”™è¯¯æˆ–ç¼ºå°‘çš„åŠŸèƒ½ ã€‚
  - æŸ¥çœ‹å’Œè¯„è®ºä¸€äº›ç°æœ‰çš„ [pull requests](https://github.com/mui-org/material-ui/pulls) å’Œ [issues](https://github.com/mui-org/material-ui/issues)ã€‚
  - å¸®åŠ©æˆ‘ä»¬ [ç¿»è¯‘](https://translate.material-ui.com) æ–‡æ¡£ã€‚
  - é€šè¿‡ [æäº¤çš„ä¸€ä¸ª pull request](https://github.com/mui-org/material-ui/pulls) æ¥ [ä¼˜åŒ–æˆ‘ä»¬çš„æ–‡æ¡£](https://github.com/mui-org/material-ui/tree/master/docs)ï¼Œä¿®å¤é”™è¯¯ï¼Œæˆ–è€…æ·»åŠ åŠŸèƒ½ã€‚
- **åœ¨ [OpenCollective](https://opencollective.com/material-ui)** ä¸Šèµ„åŠ©æˆ‘ä»¬ã€‚ å¦‚æœæ‚¨åœ¨å•†ä¸šé¡¹ç›®ä¸­ä½¿ç”¨äº† Material-UIï¼Œå¹¶å¸Œæœ›é€šè¿‡æˆä¸ºæˆ‘ä»¬çš„èµåŠ©å•†æ¥æ”¯æŒæˆ‘ä»¬çš„æŒç»­å‘å±•ï¼Œæˆ–è€…åœ¨ä¸€ä¸ªä¸šä½™çš„æˆ–è€…çˆ±å¥½çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼Œå¹¶æƒ³æˆä¸ºæˆ‘ä»¬çš„ä¸€ä¸ªæ”¯æŒè€…ï¼Œ æ‚¨éƒ½å¯ä»¥é€šè¿‡ OpenCollective æ¥èµ„åŠ©æˆ‘ä»¬ã€‚ ç­¹é›†çš„æ‰€æœ‰èµ„é‡‘éƒ½æ˜¯é€æ˜ç®¡ç†çš„ï¼ŒèµåŠ©å•†åœ¨ README å’Œ Material-UI ä¸»é¡µä¸Šéƒ½ä¼šè·å¾—è®¤å¯ã€‚

## ä¸ºä»€ä¹ˆæˆ‘çš„ç»„ä»¶åœ¨ç”Ÿäº§æ„é€ ä¸­æ²¡æœ‰æ­£ç¡®åœ°æ¸²æŸ“ï¼Ÿ

å‘ç”Ÿè¿™ç§æƒ…å†µçš„é¦–è¦åŸå› ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯æ‚¨çš„ä»£ç åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„æ†ç»‘åŒ…ä¸­å‡ºç°äº†ç±»åå†²çªã€‚ å¦‚æœæƒ³è¦ Material-UI æ­£å¸¸å·¥ä½œï¼Œé¡µé¢ä¸Šæ‰€æœ‰ç»„ä»¶çš„ `classname` å€¼å¿…é¡»ç”±å•ä¸ªå®ä¾‹çš„ [ç±»åç§°ç”Ÿæˆå™¨](/styles/advanced/#class-names) ç”Ÿæˆã€‚

è¦çº æ­£è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨éœ€è¦å¯¹é¡µé¢ä¸Šçš„æ‰€æœ‰ç»„ä»¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿å®ƒä»¬ä¹‹é—´æ°¸è¿œåªæœ‰**ä¸€ä¸ªç±»åç”Ÿæˆå™¨**ã€‚

åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½æœ€ç»ˆä¼šæ„å¤–åœ°ä½¿ç”¨ä¸¤ä¸ªç±»åç”Ÿæˆå™¨ï¼š

- æ‚¨ä¸å°å¿ƒ**æ‰“åŒ…**äº†ä¸¤ä¸ªç‰ˆæœ¬çš„ Material-UIã€‚ æ‚¨æ²¡æœ‰æ­£ç¡®è®¾ç½®æŸä¸ªå’Œ material-ui çš„åŒç­‰ä¾èµ–çš„ä¾èµ–åŒ…ã€‚
- å¯¹äºä½ çš„ React æ ‘æ§ä»¶è€Œè¨€ï¼Œä½ åœ¨ä½¿ç”¨ `JssProvider` æ„å»ºä¸€ä¸ª **subjectï¼ˆåˆ†æ”¯ï¼‰**ã€‚
- æ‚¨æ­£åœ¨ä½¿ç”¨æ‰“åŒ…æ ¹æ®ï¼Œè€Œå®ƒæ‹†åˆ†ä»£ç çš„æ–¹å¼å¯¼è‡´åˆ›å»ºäº†å¤šä¸ªç±»åç”Ÿæˆå™¨çš„å®ä¾‹ã€‚

> å¦‚æœä½ æ­£ä½¿ç”¨çš„ webpack å¸¦æœ‰ [SplitChunksPlugin](https://webpack.js.org/plugins/split-chunks-plugin/) æ’ä»¶ ï¼Œè¯·å°è¯•åœ¨è®¾ç½®é‡Œçš„ [`optimizations` ä¸‹é…ç½® `runtimeChunk`](https://webpack.js.org/configuration/optimization/#optimization-runtimechunk) ã€‚

æ€»çš„æ¥è¯´ï¼Œæ‚¨åªéœ€è¦åœ¨æ¯ä¸ª Material-UI åº”ç”¨ç¨‹åºçš„ç»„ä»¶æ ‘é¡¶éƒ¨ä½¿ç”¨ [`StylesProvider`](/styles/api/#stylesprovider) ç»„ä»¶è¿›è¡ŒåŒ…è£…ï¼Œ**å¹¶åœ¨å®ƒä»¬ä¹‹é—´å…±äº«ä¸€ä¸ªå•ä¸€çš„ç±»åç”Ÿæˆå™¨**ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## ä¸ºä»€ä¹ˆå½“æ‰“å¼€ä¸€ä¸ª Modalï¼ˆæ¨¡æ€æ¡†ï¼‰æ—¶ï¼Œä½ç½®å›ºå®šçš„å…ƒç´ ä¼šç§»åŠ¨ï¼Ÿ

å½“æ¨¡æ€æ¡†æ‰“å¼€çš„é‚£ä¸€åˆ¹é‚£ï¼Œæ»šåŠ¨è¡Œä¸ºå°±ä¼šè¢«ç¦æ­¢ã€‚ è¿™æ ·å°±èƒ½å¤Ÿé˜»æ­¢ç”¨æˆ·ä¸ä¸‹å±‚èƒŒæ™¯å†…å®¹è¿›è¡Œäº¤äº’ï¼Œè€Œæ¨¡æ€æ¡†åº”è¯¥æ˜¯å”¯ä¸€çš„äº¤äº’å†…å®¹ã€‚ ç„¶è€Œï¼Œç§»é™¤æ»šåŠ¨æ¡ä¼šç§»åŠ¨ä¸€äº›**å›ºå®šä½ç½®çš„å…ƒç´ **ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åº”ç”¨å…¨å±€ `.mui-fixed` ç±»åæ¥å‘ŠçŸ¥ Material-UI å»å¤„ç†è¿™äº›å…ƒç´ ã€‚

## å¦‚ä½•åœ¨å…¨å±€ç¦ç”¨ ripple effectï¼ˆæ¶Ÿæ¼ªæ•ˆæœï¼‰ï¼Ÿ

æ¶Ÿæ¼ªæ•ˆæœå®Œå…¨æ¥è‡ª `BaseButton` ç»„ä»¶ã€‚ æ‚¨å¯ä»¥é€šè¿‡åœ¨æ‚¨çš„ä¸»é¢˜ä¸­æä¾›ä»¥ä¸‹å†…å®¹ï¼Œæ¥å…¨å±€åœ°ç¦ç”¨æ¶Ÿæ¼ªæ•ˆæœï¼š

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  props: {
    // ç»„ä»¶çš„åå­— âš›ï¸
    MuiButtonBase: {
      // éœ€è¦åº”ç”¨çš„å±æ€§
      disableRipple: true, // åœ¨æ•´ä¸ªåº”ç”¨ä¸­éƒ½ä¸ä¼šæœ‰æ¶Ÿæ¼ªæ•ˆæœ ğŸ’£ï¼
    },
  },
});
```

## å¦‚ä½•ç¦ç”¨å…¨å±€è¿‡æ¸¡åŠ¨ç”»ï¼Ÿ

Material-UI ä½¿ç”¨ç›¸åŒçš„ä¸»é¢˜åŠ©æ‰‹æ¥åˆ›å»ºå…¶æ‰€æœ‰çš„è¿‡æ¸¡åŠ¨ç”»ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¦†ç›–ä¸»é¢˜åŠ©æ‰‹æ¥ç¦ç”¨æ‰€æœ‰çš„è¿‡æ¸¡ï¼š

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  transitions: {
    // è¿™æ ·å°±è®¾å®šäº†å…¨å±€çš„ `transition: none;`
    create: () => 'none',
  },
});
```

è€Œåœ¨è§†è§‰æµ‹è¯•è¿‡ç¨‹ï¼Œæˆ–è€…åœ¨ä½ç«¯è®¾å¤‡ä¸Šæé«˜æ€§èƒ½çš„æ—¶å€™ï¼Œç¦ç”¨è¿‡æ¸¡åŠ¨ç”»æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚

æ‚¨å¯ä»¥æ›´è¿›ä¸€æ­¥åœ°ç¦ç”¨æ‰€æœ‰çš„è¿‡æ¸¡å’ŒåŠ¨ç”»æ•ˆæœã€‚

```js
import { createMuiTheme } from '@material-ui/core';

const theme = createMuiTheme({
  overrides: {
    // ç»„ä»¶åç§° âš›ï¸
    MuiCssBaseline: {
      // è§„åˆ™åç§°
      '@global': {
        '*, *::before, *::after': {
          transition: 'none !important',
          animation: 'none !important',
        },
      },
    },
  },
});
```

è¯·æ³¨æ„ï¼Œè‹¥æƒ³ä½¿ç”¨ä¸Šè¿°æ–¹æ³•ï¼Œæ‚¨å¿…é¡»ä½¿ç”¨ `CssBaseline` ä½¿å…¶å¥æ•ˆã€‚ å¦‚æœæ‚¨é€‰æ‹©ä¸ä½¿ç”¨å®ƒï¼Œæ‚¨ä»ç„¶å¯ä»¥é€šè¿‡åŠ å…¥è¿™äº› CSS è§„åˆ™æ¥ç¦ç”¨è¿‡æ¸¡å’ŒåŠ¨ç”»ï¼š

```css
*, *::before, *::after {
  transition: 'none !important';
  animation: 'none !important';
}
```

## æˆ‘æ˜¯å¦å¿…é¡»ä½¿ç”¨ JSS ç»™æˆ‘çš„åº”ç”¨ç¨‹åºæ¥è®¾ç½®æ ·å¼å‘¢ï¼Ÿ

ä¸ç”¨çš„ï¼ŒJSS ä¸æ˜¯ä¸€ä¸ªå¿…é¡»é€‰æ‹©ã€‚ ä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªå†…ç½®çš„æ’ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒå¹¶ä¸ä¼šäº§ç”Ÿé¢å¤–çš„æ†ç»‘åŒ…å°ºå¯¸ã€‚

ç„¶è€Œï¼Œä¹Ÿè®¸æ‚¨æ­£åœ¨ç»™åº”ç”¨ç¨‹åºæ·»åŠ ä¸€äº› Material-UI ç»„ä»¶ï¼Œè€Œåº”ç”¨ç¨‹åºä»¥åŠä½¿ç”¨äº†å…¶ä»–çš„æ ·å¼è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…æ‚¨å·²ç»ç†Ÿæ‚‰äº†ä¸åŒçš„ APIï¼Œè€Œä¸æƒ³å­¦ä¹ ä¸€ä¸ªæ–°çš„ APIï¼Ÿ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·è®¿é—® [æ ·å¼åº“äº’ç”¨](/guides/interoperability/) ç« èŠ‚ï¼Œåœ¨é‚£ä½ å¯ä»¥å‘ç°æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº›æ›¿ä»£æ ·å¼åº“æ¥é‡æ–°è®¾ç½® Material-UI ç»„ä»¶çš„æ ·å¼ï¼Œè€Œè¿™æ˜¯å¤šä¹ˆçš„ç®€å•ã€‚

## å†…è”æ ·å¼ä¸ CSS ä¹‹é—´æˆ‘åº”è¯¥æ€ä¹ˆé€‰æ‹©ä½¿ç”¨çš„æ—¶æœºï¼Ÿ

æ ¹æ®ç»éªŒï¼Œä»…å¯¹åŠ¨æ€çš„æ ·å¼å±æ€§ä½¿ç”¨å†…è”æ ·å¼ã€‚ CSS çš„æ›¿ä»£æ–¹æ¡ˆä¹Ÿæœ‰è¯¸å¤šä¼˜åŠ¿ï¼Œä¾‹å¦‚ï¼š

- è‡ªåŠ¨å‰ç¼€
- æ›´å¥½åœ°è°ƒè¯•
- åª’ä½“æŸ¥è¯¢
- keyframes

## æˆ‘åº”è¯¥æ€ä¹ˆä½¿ç”¨ react-routerï¼Ÿ

åœ¨æˆ‘ä»¬çš„æŒ‡å—ä¸­è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä¸ react-routerã€Gatsby æˆ– Next.js è¿™æ ·çš„ [ç¬¬ä¸‰æ–¹è·¯ç”±åº“](/guides/composition/#routing-libraries) æ•´åˆã€‚

## æˆ‘åº”è¯¥æ€ä¹ˆè®¿é—® DOM å…ƒç´ ï¼Ÿ

æ‰€æœ‰åº”è¯¥åœ¨ DOM ä¸­æ¸²æŸ“å†…å®¹çš„ Material-UI ç»„ä»¶éƒ½ä¼šéƒ½å°†å…¶ ref è½¬å‘ç»™åº•å±‚çš„ DOM ç»„ä»¶ã€‚ è¿™æ„å‘³ç€æ‚¨å¯ä»¥é€šè¿‡è¯»å–é™„åŠ åœ¨ Material-UI ç»„ä»¶ä¸Šçš„ ref æ¥è·å– DOM å…ƒç´ ã€‚

```jsx
// æˆ–è€…ä½¿ç”¨ä¸€ä¸ª ref setter å‡½æ•°
const ref = React.createRef();
// æ¸²æŸ“
<Button ref={ref} />;
// ä½¿ç”¨
const element = ref.current;
```

å¦‚æœæ‚¨å¯¹ç›¸å…³ Material-UI ç»„ä»¶æ˜¯å¦è½¬å‘äº†å®ƒçš„ ref å­˜åœ¨ç–‘é—®çš„æ—¶å€™ï¼Œä½ å¯ä»¥æŸ¥çœ‹â€œPropsâ€ä¸‹çš„ API æ–‡æ¡£ï¼Œä¾‹å¦‚ [Button API](/api/button/#props) åŒ…å«äº†

> ref ä¼šè¢«è½¬å‘åˆ°æ ¹å…ƒç´ ã€‚

è¿™å°±è¡¨æ˜æ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ª ref æ¥è®¿é—®è¿™ä¸ª DOM å…ƒç´ ã€‚

## æˆ‘çš„é¡µé¢ä¸Šæœ‰å¤šä¸ªæ ·å¼å®ä¾‹ã€‚

å¦‚æœæ‚¨åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è­¦å‘Šæ¶ˆæ¯ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»åœ¨é¡µé¢ä¸Šåˆå§‹åŒ–äº†å¤šä¸ª `@material-ui/styles` å®ä¾‹ã€‚

> It looks like there are several instances of `@material-ui/styles` initialized in this application. This may cause theme propagation issues, broken class names, specificity issues, and make your application bigger without a good reason. 

### å¯èƒ½çš„åŸå› 

å‡ºç°è¿™äº›é—®é¢˜é€šå¸¸æœ‰å‡ ä¸ªå¸¸è§çš„åŸå› ï¼š

- åœ¨æ‚¨çš„ä¾èµ–åŒ…ä¸­è¿˜å­˜åœ¨å¦ä¸€ä¸ª `@material-ui/styles` åº“ã€‚
- æ‚¨çš„é¡¹ç›®æ˜¯ monorepo ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œlernaï¼Œyarn workspacesï¼‰ï¼Œå¹¶ä¸”æœ‰å¤šä¸ªåŒ…ä¾èµ–ç€ `@material-ui/styles` æ¨¡å—ï¼ˆè¿™ä¸å‰ä¸€ä¸ªåŒ…æˆ–å¤šæˆ–å°‘ç›¸åŒï¼‰ã€‚
- æ‚¨æœ‰å‡ ä¸ªä½¿ç”¨ `@material-ui/styles` çš„åº”ç”¨ç¨‹åºåœ¨åŒä¸€é¡µé¢ä¸Šè¿è¡Œï¼ˆä¾‹å¦‚ï¼Œwebpack ä¸­çš„å‡ ä¸ªå…¥å£ç‚¹è¢«åŠ è½½åœ¨åŒä¸€é¡µé¢ä¸Šï¼‰ã€‚

### åœ¨ node_modules ä¸­é‡å¤çš„æ¨¡å—

å¦‚æœæ‚¨è®¤ä¸ºé—®é¢˜å¯èƒ½å‡ºç°åœ¨æ‚¨çš„ä¾èµ–å…³ç³»ä¸­çš„ @material-ui/styles æ¨¡å—çš„é‡å¤ï¼Œé‚£ä¹ˆæœ‰å‡ ç§æ–¹æ³•å¯ä»¥æ£€æŸ¥ã€‚ æ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­ä½¿ç”¨ `npm ls @material-ui/styles`ã€`yarn list @material-ui/styles` æˆ– `find -L ./node_modules | grep /@material-ui/styles/package.json` è¿™äº›å‘½ä»¤è¡Œæ¥æ£€æŸ¥ã€‚

å¦‚æœä½¿ç”¨äº†è¿™äº›å‘½ä»¤ä¹‹åéƒ½æ²¡æœ‰å‘ç°é‡å¤çš„ä¾èµ–ï¼Œè¯·å°è¯•åˆ†ææ‚¨çš„æ†ç»‘åŒ…ä¸­æ˜¯å¦æœ‰å¤šä¸ª @material-ui/styles å®ä¾‹ã€‚ æ‚¨å¯ä»¥ç›´æ¥å»æ£€æŸ¥æ†ç»‘åŒ…çš„æºä»£ç ï¼Œæˆ–è€…ä½¿ç”¨ [source-map-explorer](https://github.com/danvk/source-map-explorer) æˆ– [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer) è¿™æ ·çš„å·¥å…·æ¥å¸®åŠ©æ£€æŸ¥ã€‚

å¦‚æœæ‚¨ç¡®å®šå½“å‰é‡åˆ°çš„é—®é¢˜æ˜¯æ¨¡å—é‡å¤ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•è¿™æ ·è§£å†³ï¼š

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨çš„æ˜¯ npmï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°è¯•è¿è¡Œ `npm dedupe` å‘½ä»¤ã€‚ è¿™æ¡å‘½ä»¤å°†ä¼šæœç´¢æœ¬åœ°çš„ä¾èµ–å…³ç³»ï¼Œå¹¶è¯•å›¾é€šè¿‡å°†å…±åŒçš„ä¾èµ–åŒ…ç§»åˆ°æ ‘çš„æ›´ä¸Šå±‚ï¼Œè¿™æ ·æ¥ç®€åŒ–ç»“æ„ã€‚

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ webpackï¼Œæ‚¨å¯ä»¥æ›´æ”¹ [è§£æ](https://webpack.js.org/configuration/resolve/#resolve-modules) @material-ui/styles æ¨¡å—çš„æ–¹å¼ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è¦†ç›– webpack æŸ¥æ‰¾ä¾èµ–é¡¹çš„é»˜è®¤é¡ºåºè¿™ä¸ªæ–¹æ³•ï¼Œè¿™æ ·åº”ç”¨ç¨‹åºä¸­çš„ node_modules æ¯”é»˜è®¤çš„ node module è§£æé¡ºåºæ›´ä¼˜å…ˆåœ°è¿›è¡Œæ¸²æŸ“ã€‚

```diff
  resolve: {
+   alias: {
+     "@material-ui/styles": path.resolve(appFolder, "node_modules", "@material-ui/styles"),
+   }
  }
```

### å’Œ Learn ä¸€èµ·ä½¿ç”¨

å¦‚æœæ‚¨æƒ³è¦è®© @material-ui/styles åœ¨ Lerna monorepo ä¸­è·¨åŒ…è¿è¡Œï¼Œä¸€ä¸ªå¯è¡Œçš„ä¿®å¤æ–¹æ³•æ˜¯ [æå‡ï¼ˆhoistï¼‰](https://github.com/lerna/lerna/blob/master/doc/hoist.md)å…±äº«çš„ä¾èµ–åŒ…åˆ° monorepo æ–‡ä»¶çš„æ ¹éƒ¨ã€‚ æ‚¨å¯ä»¥å°è¯•ä½¿ç”¨ --hoist æ ‡è¯†è¿è¡Œå¼•å¯¼çš„é€‰é¡¹ã€‚

```sh
lerna bootstrap --hoist
```

å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä» package.json æ–‡ä»¶ä¸­åˆ é™¤ @material-ui/styles é¡¹ï¼Œç„¶åæ‰‹åŠ¨å°†å®ƒç§»åŠ¨åˆ°æ‚¨é¡¶å±‚çš„ package.json æ–‡ä»¶ä¸­ã€‚

Lerna æ ¹ç›®å½•ä¸‹çš„ package.json æ–‡ä»¶ç¤ºä¾‹ï¼š 

```json
{
  "name": "my-monorepo",
  "devDependencies": {
    "lerna": "latest"
  },
  "dependencies": {
    "@material-ui/styles": "^4.0.0"
  },
  "scripts": {
    "bootstrap": "lerna bootstrap",
    "clean": "lerna clean",
    "start": "lerna run start",
    "build": "lerna run build"
  }
}
```

### åœ¨ä¸€ä¸ªé¡µé¢ä¸Šè¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åº

å¦‚æœæ‚¨åœ¨ä¸€ä¸ªé¡µé¢ä¸Šéœ€è¦è¿è¡Œå¤šä¸ªç¨‹åºï¼Œé‚£ä¹ˆè¯·è€ƒè™‘åœ¨æ‰€æœ‰ç¨‹åºä¸­ä½¿ç”¨ä¸€ä¸ª @material-ui/styles æ¨¡å—ã€‚ å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ webpackï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ [CommonsChunkPlugin](https://webpack.js.org/plugins/commons-chunk-plugin/) æ¥åˆ›å»ºä¸€ä¸ªæ˜¾å¼çš„ [ç¬¬ä¸‰æ–¹ä»£ç å—ï¼ˆvendor chunkï¼‰](https://webpack.js.org/plugins/commons-chunk-plugin/#explicit-vendor-chunk)ï¼Œå…¶ä¸­å°†åŒ…å« @material-ui/styles æ¨¡å—ï¼š

```diff
  module.exports = {
    entry: {
+     vendor: ["@material-ui/styles"],
      app1: "./src/app.1.js",
      app2: "./src/app.2.js",
    },
    plugins: [
+     new webpack.optimize.CommonsChunkPlugin({
+       name: "vendor",
+       minChunks: Infinity,
+     }),
    ]
  }
```

## æˆ‘çš„åº”ç”¨æ²¡æœ‰åœ¨æœåŠ¡å™¨ä¸Šæ­£ç¡®çš„æ¸²æŸ“ã€‚

å¦‚æœæ‚¨çš„ç¨‹åºæ¸²æŸ“ä¸æ­£å¸¸ï¼Œ99% çš„æƒ…å†µä¸‹éƒ½æ˜¯é…ç½®é—®é¢˜ï¼š ç¼ºå°‘å±æ€§ã€è°ƒç”¨é¡ºåºé”™è¯¯æˆ–ç¼ºå°‘ç»„ä»¶ â€” æœåŠ¡ç«¯æ¸²æŸ“å¯¹é…ç½®çš„è¦æ±‚æ˜¯å¾ˆä¸¥æ ¼çš„ï¼Œè¦æ‰¾å‡ºé—®é¢˜çš„æœ€å¥½æ–¹æ³•æ˜¯å°†æ‚¨çš„é¡¹ç›®ä¸ä¸€ä¸ªå·²ç»æ­£å¸¸è¿è¡Œçš„é¡¹ç›®é…ç½®è¿›è¡Œæ¯”è¾ƒã€‚ è¯·é€ä½æŸ¥çœ‹ [å‚è€ƒå®ç°](/guides/server-rendering/#reference-implementations)ã€‚

### CSS ä»…åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ç”Ÿæ•ˆï¼Œç„¶åå°±æ¶ˆå¤±äº†

CSS åªåœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ç”Ÿæˆã€‚ é‚£ä¹ˆï¼Œè‹¥è¿ç»­åœ°è¯·æ±‚æœåŠ¡å™¨ï¼Œå°±ä¼šå¯¼è‡´ CSS çš„ä¸¢å¤±ã€‚

#### è¦è¿è¡Œçš„æ“ä½œ

æ ·å¼è§£å†³æ–¹æ¡ˆä¾èµ–äºç¼“å­˜ï¼Œå³ *sheets manager*ï¼Œæ¥ä¸ºæ¯ä¸ªç»„ä»¶ç±»åªæ³¨å…¥ä¸€æ¬¡ CSSï¼ˆå¦‚æœæ‚¨ä½¿ç”¨äº†ä¸¤ä¸ªæŒ‰é’®ï¼Œåˆ™åªéœ€è¦åº”ç”¨ä¸€æ¬¡æŒ‰é’®çš„ CSSï¼‰ã€‚ æ‚¨éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»º **ä¸€ä¸ªæ–°çš„ `sheet` å®ä¾‹**ã€‚

*ä¿®å¤ç¤ºä¾‹ï¼š*

```diff
-// åˆ›å»ºä¸€ä¸ª sheets å®ä¾‹

-const sheets = new ServerStyleSheets();

function handleRender(req, res) {

+ // åˆ›å»ºä¸€ä¸ª sheets å®ä¾‹ã€‚
+ const sheets = new ServerStyleSheets();

  //â€¦

  // å°†ç»„ä»¶æ¸²æŸ“æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
  const html = ReactDOMServer.renderToString(
```

### React ç±»åæ¸²æŸ“ä¸åŒ¹é…

æ‚¨ä¼šé‡åˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å­˜åœ¨ç±»åä¸åŒ¹é…çš„æƒ…å†µã€‚ å¯èƒ½åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ å¦ä¸€ä¸ªå¾å…†æ˜¯ï¼Œåœ¨åˆå§‹é¡µé¢åŠ è½½å’Œä¸‹è½½å®¢æˆ·ç«¯è„šæœ¬ä¹‹é—´ï¼Œæ ·å¼ä¼šå‘ç”Ÿå˜åŒ–ã€‚

#### è¦è¿è¡Œçš„æ“ä½œ

ç±»åå€¼ä¾èµ–äº [ç±»åç”Ÿæˆå™¨](/styles/advanced/#class-names) çš„æ¦‚å¿µã€‚ æ•´ä¸ªé¡µé¢éœ€è¦ç”¨**ä¸€ä¸ªç±»åç”Ÿæˆå™¨**æ¥æ¸²æŸ“ã€‚ è¿™ä¸ªç”Ÿæˆå™¨éœ€è¦åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¸Šçš„è¡Œä¸ºä¸€è‡´ã€‚ å°±åƒè¿™æ ·ï¼š

- æ‚¨éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚æä¾›ä¸€ä¸ªæ–°çš„ç±»åç”Ÿæˆå™¨ã€‚ ä½†æ˜¯æ‚¨ä¸åº”è¯¥åœ¨ä¸åŒçš„è¯·æ±‚ä¹‹é—´å…±äº« `createGenerateClassName()`ï¼š

*ä¿®å¤ç¤ºä¾‹ï¼š*

```diff
-  // åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åç”Ÿæˆå™¨ã€‚
-const generateClassName = createGenerateClassName();

function handleRender(req, res) {

+ // åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åç”Ÿæˆå™¨ã€‚
+ const generateClassName = createGenerateClassName();

  //â€¦

  // å°†ç»„ä»¶æ¸²æŸ“ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
  const html = ReactDOMServer.renderToString(
```

- æ‚¨éœ€è¦éªŒè¯æ‚¨çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿è¡Œçš„ Material-UI çš„**ç‰ˆæœ¬** æ˜¯å¦å®Œå…¨ç›¸åŒã€‚ å³ä½¿æ˜¯å°å°çš„ç‰ˆæœ¬çš„ä¸åŒ¹é…ä¹Ÿå¯èƒ½å¯¼è‡´æ ·å¼é—®é¢˜ã€‚ è‹¥æƒ³æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œæ‚¨å¯ä»¥åœ¨æ­å»ºåº”ç”¨ç¨‹åºçš„ç¯å¢ƒä»¥åŠéƒ¨ç½²ç¯å¢ƒä¸­éƒ½è¿è¡Œ `npm list @material-ui/core`ã€‚
  
    æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡åœ¨ package.json çš„ä¾èµ–é¡¹ä¸­æŒ‡å®šæŸä¸€ä¸ªç‰¹å®šçš„ MUI ç‰ˆæœ¬ï¼Œè¿™æ ·èƒ½å¤Ÿç¡®ä¿åœ¨ä¸åŒç¯å¢ƒä¸­ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯ä¸€è‡´çš„ã€‚

*ä¿®å¤ï¼ˆpackage.jsonï¼‰çš„ç¤ºä¾‹ï¼š*

```diff
  "dependencies": {
    ...

-   "@material-ui/core": "^4.0.0",
+   "@material-ui/core": "4.0.0",
    ...
  },
```

- è¯·ç¡®ä¿æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´æ‰€å…±äº«çš„æ˜¯ç›¸åŒçš„ `process.env.NODE_ENV` å€¼ã€‚

## ä¸ºä»€ä¹ˆæˆ‘çœ‹åˆ°çš„é¢œè‰²å’Œæ–‡æ¡£è¿™é‡Œçš„é¢œè‰²å¤§ç›¸å¾„åº­ï¼Ÿ

è¿™æ˜¯å› ä¸ºæ–‡æ¡£ç½‘ç«™ä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸»é¢˜ã€‚ å› æ­¤ï¼Œè°ƒè‰²æ¿å’Œ Material-UI çš„é»˜è®¤çš„ä¸»é¢˜æ‰€å±•ç¤ºçš„æ•ˆæœæ˜¯æˆªç„¶ä¸åŒçš„ã€‚ è¯·å‚è€ƒ [è¿™ä¸ªé¡µé¢](/customization/theming/) æ¥äº†è§£è‡ªå®šä¹‰ä¸»é¢˜ã€‚

## ä¸ºä»€ä¹ˆç»„ä»¶ X éœ€è¦å±æ€§ä¸­çš„ DOM èŠ‚ç‚¹è€Œä¸æ˜¯ä¸€ä¸ª ref å¯¹è±¡ï¼Ÿ

åƒ [Portal](/api/portal/#props) æˆ– [Popper](/api/popper/#props) è¿™æ ·çš„ç»„ä»¶åˆ†åˆ«éœ€è¦ `container` æˆ– `anchorEl` å±æ€§ä¸­çš„ DOM èŠ‚ç‚¹ã€‚ è‹¥éœ€åœ¨è¿™äº›å±æ€§ä¸­ä¼ é€’ä¸€ä¸ª ref å¯¹è±¡ï¼Œå¹¶è®© Material-UI è®¿é—®å½“å‰å€¼ï¼Œè¿™çœ‹èµ·æ¥æ›´åŠ ç®€æ´æœ‰æ•ˆã€‚ è¿™åœ¨ä¸€ä¸ªç®€å•çš„æ–¹æ¡ˆä¸­å°±å¯ä»¥å®ç°ï¼š

```jsx
function App() {
  const container = React.useRef(null);

  return (
    <div className="App">
      <Portal container={container}>
        <span>ä¼ é€é—¨çš„å­ç»„ä»¶</span>
      </Portal>
      <div ref={container} />
    </div>
  );
}
```

å…¶ä¸­ï¼Œ`Portal` ä»…åœ¨ `container.current` å¯ç”¨æ—¶æ‰ä¼šå°†å…¶å­é¡¹æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ Portal å®ç°ä¾‹å­ï¼š

```jsx
function Portal({ children, container }) {
  const [node, setNode] = React.useState(null);

  React.useEffect(() => {
    setNode(container.current);
  }, [container]);

  if (node === null) {
    return null;
  }
  return ReactDOM.createPortal(children, node);
}
```

è¿™ä¸ªç®€å•çš„æ–¹æ³•å¯èƒ½ä¼šå¯å‘æ‚¨ï¼Œ`Portal` å¯èƒ½ä¼šåœ¨æŒ‚è½½åé‡æ–°æ¸²æŸ“ï¼Œå› ä¸ºåœ¨ä»»ä½•æ•ˆæœè¿è¡Œä¹‹å‰ï¼Œrefs éƒ½æ˜¯æœ€æ–°çš„ã€‚ ç„¶è€Œï¼Œä»…ä»…å› ä¸º ref æ˜¯æœ€æ–°çš„å¹¶ä¸æ„å‘³ç€å®ƒä¼šæŒ‡å‘ä¸€ä¸ªå®šä¹‰å¥½çš„å®ä¾‹ã€‚ å¦‚æœ ref æ˜¯é™„ç€åœ¨ä¸€ä¸ª ref æ‰€è½¬å‘ç»„ä»¶ä¸Šçš„è¯ï¼Œé‚£ä¹ˆ DOM èŠ‚ç‚¹ä½•æ—¶å¯ç”¨æ˜¯ä¸æ˜ç¡®çš„ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`Portal` å°†äº§ç”Ÿä¸€æ¬¡æ•ˆæœï¼Œä½†å¯èƒ½ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå› ä¸º `ref.current` çš„å€¼ä»ç„¶æ˜¯ `null`ã€‚ è€Œ Suspense ä¸­çš„ React.lazy ç»„ä»¶ä¸­ï¼Œè¿™ä¸€ç‚¹å°¤ä¸ºæ˜æ˜¾ã€‚ ä¸Šè¿°å®ç°ä¹Ÿå¹¶ä¸èƒ½ä»£è¡¨ DOM èŠ‚ç‚¹çš„ä¸€ä¸ªå˜åŒ–ã€‚ 

ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·æœ‰å®é™… DOM èŠ‚ç‚¹çš„å±æ€§ï¼Œè¿™æ · React å°±å¯ä»¥è´Ÿè´£ç¡®å®š `Portal` ä½•æ—¶åº”è¯¥é‡æ–°æ¸²æŸ“ã€‚ 

```jsx
function App() {
  const [container, setContainer] = React.useState(null);
  const handleRef = React.useCallback(instance => setContainer(instance), [setContainer])

  return (
    <div className="App">
      <Portal container={container}>
        <span>ä¼ é€çš„å­ç»„ä»¶</span>
      </Portal>
      <div ref={handleRef} />
    </div>
  );
}
```

## clsx ä¾èµ–æ˜¯ç”¨äºä»€ä¹ˆï¼Ÿ

[clsx](https://github.com/lukeed/clsx)æ˜¯ä¸€ä¸ªå°å‹å·¥å…·é›†ï¼Œç”¨äºæœ‰æ¡ä»¶åœ°ä»ä¸€ä¸ªå¯¹è±¡ä¸­æ„é€  `className` å­—ç¬¦ä¸²ï¼Œæ­¤å¯¹è±¡çš„é”®æ˜¯ç±»å­—ç¬¦ä¸²ï¼ˆclass stringsï¼‰ï¼Œè€Œå€¼æ˜¯å¸ƒå°”å€¼ï¼ˆbooleansï¼‰ã€‚ 

è¯·ä¸è¦è¿™æ ·å†™ï¼š

```jsx
// let disabled = false, selected = true;

return (
  <div
    className={`MuiButton-root ${disabled ? 'Mui-disabled' : ''} ${selected ? 'Mui-selected' : ''}`}
  />
);
```

æ‚¨å¯ä»¥è¿™æ ·åšï¼š

```jsx
import clsx from 'clsx';

return (
  <div
    className={clsx('MuiButton-root', {
      'Mui-disabled': disabled,
      'Mui-selected': selected,
    })}
  />
);
```